<%- include('partials/header') %>

<div class="form-section">
  <h2><i class="fa-solid fa-plus"></i> Adicionar Novo Projeto</h2>
  <form action="/projetos" method="POST">
    <input type="text" name="nome" placeholder="Nome do projeto" required>
    <textarea name="descricao" placeholder="Descri√ß√£o" required></textarea>
    <input type="url" name="linkRepositorio" placeholder="Link do Reposit√≥rio (opcional)">
    <button type="submit">Adicionar Projeto</button>
  </form>
</div>

<h2><i class="fa-solid fa-laptop-code"></i> Projetos Cadastrados</h2>
<% if (projetos.length === 0) { %>
  <p>Nenhum projeto cadastrado.</p>
<% } else { %>
  <div class="card-grid">
    <% projetos.forEach(p => { %>
      <div class="card">
        <h3><%= p.nome %></h3>
        <p><%= p.descricao %></p>

        <% if (p.linkRepositorio) { %>
          <a href="<%= p.linkRepositorio %>" target="_blank" class="btn" style="margin-bottom: 15px;">
            <i class="fa-brands fa-github"></i> Ver Reposit√≥rio
          </a>
        <% } %>

        <form action="/projetos/<%= p.id %>?_method=PUT" method="POST">
          <input type="text" name="nome" value="<%= p.nome %>">
          <textarea name="descricao"><%= p.descricao %></textarea>
          <input type="url" name="linkRepositorio" placeholder="Link do Reposit√≥rio" value="<%= p.linkRepositorio || '' %>">
          
          <div class="card-actions">
            <button type="submit">‚úèÔ∏è Atualizar</button>
          </form> 
            
          <form action="/projetos/<%= p.id %>?_method=DELETE" method="POST">
            <button type="submit" class="btn-delete">üóëÔ∏è Excluir</button>
          </form>
        </div>
      </div>
    <% }) %>
  </div>
<% } %>

<%- include('partials/footer') %>